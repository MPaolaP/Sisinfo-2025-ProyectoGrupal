{% extends 'layout_usuarios.html' %}
{% block title %}Reportes Estratégicos | Distrito 5{% endblock %}

{% block content %}
<div class="module-wrapper reports-module" id="reports_module">
  <section class="module-card reports-header">
    <div class="card-header">
      <div>
        <h2>Dashboards y <span class="highlight">Reportes</span></h2>
        <p>Analiza el rendimiento de las sucursales y accede a indicadores clave en tiempo real.</p>
      </div>
      <div class="report-meta">
        <span class="meta-label">Actualizado:</span>
        <span class="meta-value" id="reports_last_update">--</span>
      </div>
    </div>
    <div class="reports-kpi-grid" id="sales_kpis">
      <div class="kpi-card">
        <span class="kpi-label">Facturación diaria</span>
        <strong class="kpi-value" data-kpi="daily">$0</strong>
      </div>
      <div class="kpi-card">
        <span class="kpi-label">Facturación semanal</span>
        <strong class="kpi-value" data-kpi="weekly">$0</strong>
      </div>
      <div class="kpi-card">
        <span class="kpi-label">Facturación mensual</span>
        <strong class="kpi-value" data-kpi="monthly">$0</strong>
      </div>
      <div class="kpi-card">
        <span class="kpi-label">Ticket promedio</span>
        <strong class="kpi-value" data-kpi="avg_ticket">$0</strong>
      </div>
    </div>
  </section>

  <section class="module-card reports-grid">
    <div class="report-panel" id="inventory_overview_panel">
      <div class="panel-header">
        <h3>Inventario por sucursal</h3>
        <p>Unidades disponibles y alertas activas por tienda.</p>
      </div>
      <div class="panel-body">
        <div class="inventory-summary">
          <div class="summary-chip">
            <span>Total consolidado</span>
            <strong id="inventory_total_units">0</strong>
          </div>
          <div class="summary-chip alert">
            <span>Alertas activas</span>
            <strong id="inventory_total_alerts">0</strong>
          </div>
        </div>
        <div class="table-wrapper compact">
          <table class="reports-table" id="inventory_overview_table">
            <thead>
              <tr>
                <th>Sucursal</th>
                <th>Unidades</th>
                <th>Alertas</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="3" class="table-empty">Cargando inventario...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="report-panel" id="top_products_panel">
      <div class="panel-header">
        <h3>Top productos más vendidos</h3>
        <p>Ranking de referencias según ventas totales.</p>
      </div>
      <div class="panel-body">
        <ol class="top-products-list" id="top_products_list">
          <li class="placeholder">Cargando información...</li>
        </ol>
      </div>
    </div>

    <div class="report-panel" id="financial_indicators_panel">
      <div class="panel-header">
        <h3>Indicadores financieros básicos</h3>
        <p>Métricas clave de facturación y flujo de caja.</p>
      </div>
      <div class="panel-body">
        <div class="indicator-grid" id="financial_indicators">
          <div class="placeholder">Cargando indicadores...</div>
        </div>
      </div>
    </div>

    <div class="report-panel" id="power_bi_panel">
      <div class="panel-header">
        <h3>Integración con Power BI</h3>
        <p>Conecta tu tablero corporativo para análisis avanzados.</p>
      </div>
      <div class="panel-body">
        <div class="powerbi-integration" id="power_bi_embed">
          <div class="placeholder">Cargando integración...</div>
        </div>
      </div>
    </div>
  </section>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/reports.js') }}"></script>
{% endblock %}